<!DOCTYPE html>
<html>
  <head>
    <link rel='stylesheet' href='/styles/bootstrap.min.css' />
    <link rel='stylesheet' href='/styles/style.css' />
    <script src="/js/jquery-2.2.0.min.js" type="text/javascript"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>
  </head>
  <body>
    <div>
      <nav class="navbar navbar-inverse" style="padding-left:130px;">
          <ul class="nav navbar-nav">
            <li><a href="/">Home</a></li>
          </ul>
      </nav>
    </div>

    <div class="center">
      <h1>Register</h1>
    </div>

    <div style="padding-left: 100px">
      <form class="form-horizontal" style="width: 70%;" id="registerForm" onsubmit="return false;">
        
        <!-- Name -->
        <div class="form-group">
          <label for="name" class="col-sm-2 control-label">Name</label>
          <div class="col-sm-10">
              <input type="text" class="form-control" id="name" name="name" placeholder="Enter Name" required>
          </div>
        </div>

        <!-- Country -->
        <div class="form-group">
          <label for="country" class="col-sm-2 control-label">Country</label>
          <div class="col-sm-10">
              <input type="text" class="form-control" id="country" name="country" placeholder="Enter Country">
          </div>
        </div>

        <!-- Birth Date -->
        <div class="form-group">
          <label for="birthDate" class="col-sm-2 control-label">Birth Date</label>
          <div class="col-sm-10">
              <input type="date" class="form-control" id="birthDate" name="birthDate">
          </div>
        </div>

        <!-- Email -->
        <div class="form-group">
          <label for="email" class="col-sm-2 control-label">Email</label>
          <div class="col-sm-10">
              <input type="text" class="form-control" id="email" name="email" placeholder="Email" required>
          </div>
        </div>

        <!-- Password -->
        <div class="form-group">
          <label for="password" class="col-sm-2 control-label">Password</label>
          <div class="col-sm-10">
              <input type="password" class="form-control" id="password" name="password" placeholder="Password" required>
          </div>
        </div>

        <!-- Role Dropdown -->
        <div class="form-group">
          <label for="role" class="col-sm-2 control-label">Role</label>
          <div class="col-sm-10">
              <select class="form-control" id="role" name="role" required>
                  <option value="customer">Customer</option>
                  <option value="truckOwner">Truck Owner</option>
              </select>
          </div>
        </div>

        <!-- Register Button -->
        <div class="form-group">
          <div class="col-sm-10 col-sm-offset-2">
              <input id="register" name="register" type="button" value="Register" class="btn btn-primary">
          </div>
        </div>
      </form>
    </div>

    <script>
      $('#register').click(function() {
        const data = {
          name: $('#name').val(),
          country: $('#country').val(),
          birthDate: $('#birthDate').val(),
          email: $('#email').val(),
          password: $('#password').val(),
          role: $('#role').val()
        };

        $.ajax({
          url: '/api/v1/user',
          type: 'POST',
          contentType: 'application/json',
          data: JSON.stringify(data),
          success: function(res) {
            alert('User registered successfully');
            window.location.href = '/'; // redirect to login page
          },
          error: function(err) {
            alert(err.responseText);
          }
        });
      });
    </script>
  </body>
</html>
